Vue.component('tile',
	      {
		  template:'<polygon @click="test()" :points="pp" fill="yellow" stroke="black"></polygon>',
		  props:['pp'],
		  methods:{
		      test:function(){
			  alert("cdf");
		      }
		  }
	      }

	     );
let app = new Vue({
    el: "#app",
    data:{
	N:2,
	/*choutenn:{A:{x:400,y:400},
	  B:{x:500,y:400},
	  C:{x:500,y:500},
	  D:{x:400,y:500},
	  E:{x:500,y:300},
	  F:{x:400,y:300}
	  },
	  men:{f0:["A","B","C","D"],
	  f1:["A","B","E","F"]},
	*/
	cont:100,
	theta:0,
	
	choutenn: {"-2,-2,0":{"x":-200,"y":400},
		   "-2,-2,1":{"x":-100,"y":400},
		   "-1,-2,0":{"x":-50,"y":313.39745962155615},
		   "-1,-2,1":{"x":50,"y":313.39745962155615},
		   "0,-2,0":{"x":100,"y":226.79491924311228},
		   "0,-2,1":{"x":200,"y":226.79491924311228},
		   "1,-2,0":{"x":250,"y":140.1923788646684},
		   "1,-2,1":{"x":350,"y":140.1923788646684},
		   "2,-2,0":{"x":400,"y":53.58983848622455},
		   "2,-2,1":{"x":500,"y":53.58983848622455},
		   "-2,-1,0":{"x":-50,"y":486.60254037844385},
		   "-2,-1,1":{"x":50,"y":486.60254037844385},
		   "-1,-1,0":{"x":100,"y":400},
		   "-1,-1,1":{"x":200,"y":400},
		   "0,-1,0":{"x":250,"y":313.39745962155615},
		   "0,-1,1":{"x":350,"y":313.39745962155615},
		   "1,-1,0":{"x":400,"y":226.79491924311228},
		   "1,-1,1":{"x":500,"y":226.79491924311228},
		   "2,-1,0":{"x":550,"y":140.1923788646684},
		   "2,-1,1":{"x":650,"y":140.1923788646684},
		   "-2,0,0":{"x":100,"y":573.2050807568877},
		   "-2,0,1":{"x":200,"y":573.2050807568877},
		   "-1,0,0":{"x":250,"y":486.60254037844385},
		   "-1,0,1":{"x":350,"y":486.60254037844385},
		   "0,0,0":{"x":400,"y":400},
		   "0,0,1":{"x":500,"y":400},
		   "1,0,0":{"x":550,"y":313.39745962155615},
		   "1,0,1":{"x":650,"y":313.39745962155615},
		   "2,0,0":{"x":700,"y":226.79491924311228},
		   "2,0,1":{"x":800,"y":226.79491924311228},
		   "-2,1,0":{"x":250,"y":659.8076211353316},
		   "-2,1,1":{"x":350,"y":659.8076211353316},
		   "-1,1,0":{"x":400,"y":573.2050807568877},
		   "-1,1,1":{"x":500,"y":573.2050807568877},
		   "0,1,0":{"x":550,"y":486.60254037844385},
		   "0,1,1":{"x":650,"y":486.60254037844385},
		   "1,1,0":{"x":700,"y":400},
		   "1,1,1":{"x":800,"y":400},
		   "2,1,0":{"x":850,"y":313.39745962155615},
		   "2,1,1":{"x":950,"y":313.39745962155615},
		   "-2,2,0":{"x":400,"y":746.4101615137754},
		   "-2,2,1":{"x":500,"y":746.4101615137754},
		   "-1,2,0":{"x":550,"y":659.8076211353316},
		   "-1,2,1":{"x":650,"y":659.8076211353316},
		   "0,2,0":{"x":700,"y":573.2050807568877},
		   "0,2,1":{"x":800,"y":573.2050807568877},
		   "1,2,0":{"x":850,"y":486.60254037844385},
		   "1,2,1":{"x":950,"y":486.60254037844385},
		   "2,2,0":{"x":1000,"y":400},
		   "2,2,1":{"x":1100,"y":400}},
	men: {"-1,-2":["-2,-1,0","-2,-1,1","-1,-1,0","-1,-2,1","-1,-2,0","-2,-2,1"],
	      "-1,-1":["-1,-1,0","-1,-1,1","0,-1,0","0,-2,1","0,-2,0","-1,-2,1"],
	      "-1,0":["0,-1,0","0,-1,1","1,-1,0","1,-2,1","1,-2,0","0,-2,1"],
	      "-1,1":["1,-1,0","1,-1,1","2,-1,0","2,-2,1","2,-2,0","1,-2,1"],
	      "0,-2":["-2,0,0","-2,0,1","-1,0,0","-1,-1,1","-1,-1,0","-2,-1,1"],
	      "0,-1":["-1,0,0","-1,0,1","0,0,0","0,-1,1","0,-1,0","-1,-1,1"],
	      "0,0":["0,0,0","0,0,1","1,0,0","1,-1,1","1,-1,0","0,-1,1"],
	      "0,1":["1,0,0","1,0,1","2,0,0","2,-1,1","2,-1,0","1,-1,1"],
	      "1,-2":["-2,1,0","-2,1,1","-1,1,0","-1,0,1","-1,0,0","-2,0,1"],
	      "1,-1":["-1,1,0","-1,1,1","0,1,0","0,0,1","0,0,0","-1,0,1"],
	      "1,0":["0,1,0","0,1,1","1,1,0","1,0,1","1,0,0","0,0,1"],
	      "1,1":["1,1,0","1,1,1","2,1,0","2,0,1","2,0,0","1,0,1"],
	      "2,-2":["-2,2,0","-2,2,1","-1,2,0","-1,1,1","-1,1,0","-2,1,1"],
	      "2,-1":["-1,2,0","-1,2,1","0,2,0","0,1,1","0,1,0","-1,1,1"],
	      "2,0":["0,2,0","0,2,1","1,2,0","1,1,1","1,1,0","0,1,1"],
	      "2,1":["1,2,0","1,2,1","2,2,0","2,1,1","2,1,0","1,1,1"]},

    },
    
    computed:{
	shrunken:function(){
	    let points={};
	    let profile={};
	    for(let f in this.men){
		let xsum=0;
		let ysum=0;
		let l=0;
		for(let v of this.men[f]){
		    xsum += this.choutenn[v].x;
		    ysum += this.choutenn[v].y;
		    l++;
		}
		let mcx=xsum/l;
		let mcy=ysum/l;
		let pstr=" ";
		let idx=0;
		let face = [];
		for(let v of this.men[f]){
		    let dx=this.cont/100*(this.choutenn[v].x-mcx);
		    let dy=this.cont/100*(this.choutenn[v].y-mcy);
		    let x=(Math.cos(Math.PI*this.theta/180))*dx
			-(Math.sin(Math.PI*this.theta/180))*dy+mcx;
		    let y=(Math.sin(Math.PI*this.theta/180))*dx
			+(Math.cos(Math.PI*this.theta/180))*dy+mcy;
		    pstr += (x+" "+y+" ");
		    this.choutenn[f+idx] = {x:x, y:y};
		    profile[f+idx] = {v:v, f:f};
		    face.push(f+idx);
		    idx++;
		    
		}
		points[f+"shrink"]=face;
	    }
	    let edges=[];
	    for (let v in profile){
		for(let w in profile){
		    if(profile[v].v == profile[w].v &&
		       this.adjacent(this.men[profile[v].f],this.men[profile[w].f])){
			edges.push([v,w]);
		    }
		    
		}
	    }
	    return {men:points, hen:edges};
	}
    },

    

    methods:{
	adjacent:function(f,g){//tell if f and g are adjacent
	    let count=0;
	    for(let v of f){
		for(let w of g){
		    if(v == w){
			count++;
		    }
		}
	    }
	    if(count ==2){
		return true;
	    }
	    else{
		return false;
	    }

	},
	pixel:function(p){
	    return {x:p.x*100+400, y:-p.y*100+400};
	},

	points:function(f){
	    let s="";
	    for(let p of f){
		s += " "+this.choutenn[p].x+" "+this.choutenn[p].y;
	    }
	    return s;
	}
    }
    
    
})
